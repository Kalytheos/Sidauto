<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biblioteca Virtual - SIDAUTO BIBLIOTECA</title>
    
    <!-- Favicons para m√°xima compatibilidad -->
    <link rel="icon" type="image/png" sizes="32x32" href="assets/libro.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/libro.png">
    <link rel="shortcut icon" href="assets/libro.png" type="image/png">
    <link rel="apple-touch-icon" href="assets/libro.png">
    
    <!-- Supabase SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <header>
      <nav class="navbar">
        <div class="nav-container">
          <a href="index.html" class="nav-logo">SIDAUTO BIBLIOTECA</a>
          
          <!-- Barra de b√∫squeda r√°pida -->
          <div class="quick-search">
            <input type="text" id="quickSearchInput" placeholder="Buscar libros...">
          </div>
          
          <!-- Navegaci√≥n entre p√°ginas -->
          <div class="nav-links">
            <a href="index.html" class="nav-link">Inicio</a>
            <a href="espacios.html" class="nav-link">Nuestro Espacio</a>
            
            <!-- Botones de acci√≥n -->
            <a href="#" id="alquilarBtn" class="nav-link">
              Alquilar
            </a>
            <a href="#" id="adminPanelBtn" class="nav-link" title="Panel Administradores">
              Admin
            </a>
          </div>
        </div>
      </nav>
    </header>

    <main>
      <!-- Secci√≥n Hero -->
      <section class="biblioteca-hero">
        <div class="hero-content">
          <h1 class="hero-title">Biblioteca Virtual</h1>
          <p class="hero-subtitle">Explora nuestra colecci√≥n digital de libros</p>
        </div>
      </section>

      <!-- Secci√≥n Biblioteca Virtual -->
      <section id="biblioteca" class="library-section">
        <div class="container">
          <h2>Cat√°logo de Libros</h2>
          <p>Encuentra el libro perfecto para ti en nuestra extensa colecci√≥n</p>
          
          <!-- Sistema de B√∫squeda -->
          <div class="search-system">
            <div class="search-bar">
              <input type="text" id="searchInput" placeholder="Buscar libros por t√≠tulo, autor, editorial..." />
              <button id="clearSearch" class="clear-btn">‚úï</button>
            </div>
            
            <!-- Filtros -->
            <div class="filters">
              <div class="filter-group">
                <label for="genreFilter">G√©nero:</label>
                <select id="genreFilter">
                  <option value="">Todos los g√©neros</option>
                </select>
              </div>
              
              <div class="filter-group">
                <label for="editorialFilter">Editorial:</label>
                <select id="editorialFilter">
                  <option value="">Todas las editoriales</option>
                </select>
              </div>
              
              <div class="filter-group">
                <label for="yearFilter">A√±o:</label>
                <select id="yearFilter">
                  <option value="">Todos los a√±os</option>
                </select>
              </div>
              
              <div class="filter-group">
                <label for="statusFilter">Estado:</label>
                <select id="statusFilter">
                  <option value="">Todos</option>
                  <option value="disponible">Disponible</option>
                  <option value="prestado">Prestado</option>
                  <option value="reservado">Reservado</option>
                </select>
              </div>
            </div>
            
            <!-- Estad√≠sticas de b√∫squeda -->
            <div class="search-stats">
              <span id="searchResults">Utiliza la b√∫squeda para explorar nuestra colecci√≥n</span>
              <button id="resetFilters" class="reset-btn">Limpiar filtros</button>
            </div>
          </div>
          
          <!-- Contenedor de libros -->
          <div class="books-grid" id="booksGrid">
            <div class="loading">Cargando libros desde Supabase...</div>
          </div>
          
          <!-- Sistema de paginaci√≥n -->
          <div class="pagination-container" id="paginationContainer" style="display: none;">
            <div class="pagination-info">
              <span id="paginationInfo">Mostrando 1-20 de 3000 libros</span>
            </div>
            <div class="pagination-controls">
              <button id="firstPage" class="pagination-btn" title="Primera p√°gina">‚èÆÔ∏è</button>
              <button id="prevPage" class="pagination-btn" title="P√°gina anterior">‚¨ÖÔ∏è</button>
              <div class="page-numbers" id="pageNumbers">
                <!-- Los n√∫meros de p√°gina se generan din√°micamente -->
              </div>
              <button id="nextPage" class="pagination-btn" title="P√°gina siguiente">‚û°Ô∏è</button>
              <button id="lastPage" class="pagination-btn" title="√öltima p√°gina">‚è≠Ô∏è</button>
            </div>
            <div class="items-per-page">
              <label for="itemsPerPage">Libros por p√°gina:</label>
              <select id="itemsPerPage">
                <option value="20">20</option>
                <option value="40">40</option>
                <option value="60">60</option>
                <option value="100">100</option>
              </select>
            </div>
          </div>
        </div>
      </section>

      <!-- Secci√≥n de Estad√≠sticas -->
      <section class="stats-section">
        <div class="container">
          <h2>üìä Estad√≠sticas de la Colecci√≥n</h2>
          <div class="stats-grid">
            <div class="stat-item">
              <div class="stat-icon">üìö</div>
              <h3 id="totalBooks">-</h3>
              <p>Total de Libros</p>
            </div>
            <div class="stat-item">
              <div class="stat-icon">‚úÖ</div>
              <h3 id="availableBooks">-</h3>
              <p>Disponibles</p>
            </div>
            <div class="stat-item">
              <div class="stat-icon">üìñ</div>
              <h3 id="borrowedBooks">-</h3>
              <p>Prestados</p>
            </div>
            <div class="stat-item">
              <div class="stat-icon">üè∑Ô∏è</div>
              <h3 id="totalGenres">-</h3>
              <p>G√©neros √önicos</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Secci√≥n Call to Action -->
      <section class="cta-section">
        <div class="container">
          <div class="cta-content">
            <h2>¬øNo encuentras lo que buscas?</h2>
            <p>Vis√≠tanos en persona y descubre nuestra colecci√≥n f√≠sica completa</p>
            <div class="cta-buttons">
              <a href="espacios.html" class="cta-btn primary">Conocer Nuestro Espacio</a>
              <a href="index.html" class="cta-btn secondary">Regresar al Inicio</a>
            </div>
          </div>
        </div>
      </section>
    </main>

    <footer>
      <div class="container">
        <p>&copy; 2025 SIDAUTO BIBLIOTECA. Un espacio para el conocimiento y la comunidad.</p>
      </div>
    </footer>

    <!-- Modal de Alquiler -->
    <div id="alquilarModal" class="rental-modal">
      <div class="modal-content rental-content">
        <div class="modal-header">
          <div class="modal-icon">üìö</div>
          <h2>Solicitud de Pr√©stamo</h2>
          <button class="modal-close" onclick="closeRentalModal()">&times;</button>
        </div>
        
        <form id="rentalForm" class="rental-form">
          <div class="form-section">
            <h3><br>üìñ Seleccionar Libro</h3>
            <div class="book-search-container">
              <input type="text" id="rentalBookSearch" placeholder="Buscar libro por t√≠tulo, autor, c√≥digo...">
              <input type="hidden" id="selectedBookId" name="selectedBookId" required>
              <div id="rentalBookSuggestions" class="rental-suggestions"></div>
            </div>
            <div id="selectedBookInfo" class="selected-book-info" style="display: none;">
              <div class="selected-book-card">
                <span class="selected-book-title"></span>
                <button type="button" class="remove-selection" onclick="clearBookSelection()">‚úï</button>
              </div>
            </div>
          </div>
          
          <div class="form-section">
            <h3>Datos del Solicitante</h3>
            <div class="form-grid">
              <div class="form-group">
                <label for="rentalUsuario">Usuario:</label>
                <input type="text" id="rentalUsuario" name="usuario" required placeholder="Nombre completo">
              </div>
              <div class="form-group">
                <label for="rentalCedula">C√©dula:</label>
                <input type="text" id="rentalCedula" name="cedula" required placeholder="123456789">
              </div>
              <div class="form-group">
                <label for="rentalTelefono">Tel√©fono:</label>
                <input type="tel" id="rentalTelefono" name="telefono" required placeholder="3001234567">
              </div>
              <div class="form-group">
                <label for="rentalCorreo">Correo electr√≥nico:</label>
                <input type="email" id="rentalCorreo" name="correo" required placeholder="ejemplo@correo.com">
              </div>
            </div>
          </div>
          
          <div class="form-actions">
            <button type="button" class="btn-cancel" onclick="closeRentalModal()">Cancelar</button>
            <button type="submit" class="btn-submit">Enviar Solicitud</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Modal de Login Administrador -->
    <div id="adminLoginModal" class="rental-modal">
      <div class="modal-content admin-login-content">
        <div class="modal-header">
          <h2>Panel de Administradores</h2>
          <button class="modal-close" onclick="closeAdminLoginModal()">&times;</button>
        </div>
        
        <form id="adminLoginForm" class="admin-login-form">
          <div class="form-section">
            <h3><br>üîê Iniciar Sesi√≥n</h3>
            <div class="form-group">
              <label for="adminUsuario">Usuario:</label>
              <input type="text" id="adminUsuario" name="usuario" required autocomplete="username">
            </div>
            <div class="form-group">
              <label for="adminContrasena">Contrase√±a:</label>
              <input type="password" id="adminContrasena" name="contrasena" required autocomplete="current-password">
            </div>
          </div>
          
          <div class="form-actions">
            <button type="button" class="btn-cancel" onclick="closeAdminLoginModal()">Cancelar</button>
            <button type="submit" class="btn-submit">Iniciar Sesi√≥n</button>
          </div>
        </form>
      </div>
    </div>

    <script src="script.js"></script>
  </body>
</html>
